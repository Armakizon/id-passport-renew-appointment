{% extends "base.html" %}
{% block title %}Appointment Dates{% endblock %}

{% block content %}
  <h2 class="mb-4">Appointment Dates</h2>

  <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#filterDrawer" aria-controls="filterDrawer">
    Open Filter
  </button>

  <p><strong>Last Updated:</strong> {{ last_updated }} ({{ time_since }})</p>

  {% include "partials/filter_drawer.html" %}
  {% include "partials/getLocationButton.html" %}
  {% include "partials/location_dropdown.html" %}
  {% include "partials/toggle_button.html" %}
  {% include "partials/appointments_table.html" %}
{% endblock %}

{% block styles %}
  <link href="{{ url_for('static', filename='css/distanceFilter.css') }}" rel="stylesheet">
{% endblock %}

{% block scripts %}
  <script>
    // Pass dynamic data to JS as globals
    window.branch_map = {{ branch_map | tojson }};
    window.userLat = null;
    window.userLon = null;
  </script>

  <script src="{{ url_for('static', filename='js/distanceFilter.js') }}"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}
