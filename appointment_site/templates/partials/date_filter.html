<!-- templates/partials/date_filter.html -->
<div class="mb-3">
  <label for="dateFilter" class="form-label">Filter by Date:</label>
  <input type="date" id="dateFilter" class="form-control">
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const dateInput = document.getElementById("dateFilter");

    // Pre-select if date exists in URL
    const params = new URLSearchParams(window.location.search);
    const date = params.get("date");
    if (date) {
      dateInput.value = date;
    }

    // Update URL when changed
    dateInput?.addEventListener("change", () => {
      const selectedDate = dateInput.value;
      const url = new URL(window.location);
      if (selectedDate) {
        url.searchParams.set("date", selectedDate);
      } else {
        url.searchParams.delete("date");
      }
      window.location.href = url.toString();
    });
  });
</script>