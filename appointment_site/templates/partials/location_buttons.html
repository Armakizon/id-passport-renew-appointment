<div id="locationButtons" class="mb-3">
  <button id="getLocationBtn" class="btn btn-primary">
    📍 Based on My Location
  </button>
</div>

<script>
document.getElementById("getLocationBtn")?.addEventListener("click", () => {
  if (!navigator.geolocation) {
    alert("Geolocation is not supported by your browser.");
    return;
  }

  navigator.geolocation.getCurrentPosition(pos => {
    const userLat = pos.coords.latitude;
    const userLon = pos.coords.longitude;

    // Redirect with query parameters
    const url = new URL(window.location);
    url.searchParams.set('lat', userLat);
    url.searchParams.set('lon', userLon);
    window.location.href = url.toString();  // Reload and let server do the rest
  }, () => {
    alert("Failed to get your location.");
  });
});
</script>
