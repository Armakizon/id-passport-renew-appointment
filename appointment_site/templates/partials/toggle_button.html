<div class="mb-3">
  <button id="toggleEarliestBtn" class="btn btn-outline-primary">
    Show All Dates
  </button>
</div>

<script>
	function initToggleEarliest() {
	  const earliestBtn = document.getElementById("toggleEarliestBtn");

	  // Set initial button text based on current state
	  earliestBtn.textContent = window.currentShowEarliestOnly !== false
		? "הצג את כל התאריכים"
		: "הצג את התאריך המוקדם ביותר בכל לשכה";

	  earliestBtn?.addEventListener("click", () => {
		// Toggle the global state
		window.currentShowEarliestOnly = !window.currentShowEarliestOnly;
		
		earliestBtn.textContent = window.currentShowEarliestOnly
		  ? "הצג את כל התאריכים"
		  : "הצג את התאריך המוקדם ביותר בכל לשכה";

		if (typeof updateTableVisibility === "function") {
		  updateTableVisibility(window.currentShowEarliestOnly);
		}
	  });

	  if (typeof updateTableVisibility === "function") {
		updateTableVisibility(window.currentShowEarliestOnly);  // Run once on load with correct state
	  }
	}

	window.addEventListener("DOMContentLoaded", initToggleEarliest);

</script>
