<div class="mb-3">
  <button id="toggleEarliestBtn" class="btn btn-outline-primary">
    Show All Dates
  </button>
</div>

<script>
	let showEarliestOnly = true;  // start showing earliest only

	function initToggleEarliest() {
	  const earliestBtn = document.getElementById("toggleEarliestBtn");

	  // Set initial button text based on initial state
	  earliestBtn.textContent = showEarliestOnly
		? "Show All Dates"
		: "Show Earliest Date per Branch";

	  earliestBtn?.addEventListener("click", () => {
		showEarliestOnly = !showEarliestOnly;
		earliestBtn.textContent = showEarliestOnly
		  ? "Show All Dates"
		  : "Show Earliest Date per Branch";

		if (typeof updateTableVisibility === "function") {
		  updateTableVisibility(showEarliestOnly);
		}
	  });

	  if (typeof updateTableVisibility === "function") {
		updateTableVisibility(showEarliestOnly);  // Run once on load with correct state
	  }
	}

	window.addEventListener("DOMContentLoaded", initToggleEarliest);

</script>
