<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="{% block description %}בדיקת תורים לחידוש דרכון ותעודת זהות - התראות וזמינות בסניפים קרובים{% endblock %}" />
  <link rel="canonical" href="{{ request.url }}" />
  <title>{% block title %}BookGov - תורים לחידוש דרכון ות"ז{% endblock %}</title>

  <!-- Google Fonts: Heebo for Hebrew -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Persisted theme to avoid FOUC -->
  <script>
    (function() {
      try { if (localStorage.getItem('theme') === 'dark') document.documentElement.classList.add('dark'); } catch(e) {}
    })();
  </script>

  <!-- Your custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
  <link href="{{ url_for('static', filename='css/appointments_table.css') }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename='css/distanceFilter.css') }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename='css/theme.css') }}" rel="stylesheet" />

  <style>
    .navbar-nav .nav-link { font-size: 1.1rem; font-weight: 500; }
    .navbar-nav { margin: 0 auto; }
  </style>

  {% block styles %}{% endblock %}
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light mb-4 sticky-top" style="direction: rtl;">
  <div class="container-fluid d-flex align-items-center" style="direction: ltr; justify-content: space-between;">
    <!-- Brand on left -->
    <a class="navbar-brand" href="{{ url_for('index') }}">BookGov</a>

    <!-- Nav links centered -->
    <div class="collapse navbar-collapse justify-content-center" id="navbarNav" style="direction: rtl;">
		<ul class="navbar-nav d-flex align-items-center" style="gap: 2rem;">
		  <li class="nav-item">
			<a class="nav-link" href="{{ url_for('index') }}">בית</a>
		  </li>
		  <!-- Vertical divider -->
		  <li style="border-left: 1px solid #888; height: 24px; margin: 0 1rem;"></li>
		  <li class="nav-item">
			<a class="nav-link" href="{{ url_for('faq') }}">שאלות נפוצות</a>
		  </li>
		  <!-- Vertical divider -->
		  <li style="border-left: 1px solid #888; height: 24px; margin: 0 1rem;"></li>
		  <li class="nav-item">
			<a class="nav-link" href="{{ url_for('about') }}">אודות</a>
		  </li>
		</ul>

    </div>

    <button id="themeToggle" class="btn btn-outline-secondary btn-sm ms-2" type="button" aria-label="Toggle theme">מצב כהה</button>
    <!-- Hamburger toggler -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>

  <div class="container mt-4">
    {% block content %}{% endblock %}
  </div>

  <!-- Confirmation Modal (added here so it’s always on the page) -->
  <div id="confirmationModal" style="display:none;">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <p id="confirmationMessage"></p>
      <button id="confirmBtn" class="btn btn-success">אשר</button>
      <button id="cancelBtn" class="btn btn-secondary">בטל</button>
    </div>
  </div>

  <!-- Bootstrap JS and Popper -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

  {% block scripts %}
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  <script src="{{ url_for('static', filename='js/sortAppointments.js') }}"></script>
  <script src="{{ url_for('static', filename='js/dateFilter.js') }}"></script>
  <script>
    (function() {
      const btn = document.getElementById('themeToggle');
      function apply(labelOnly=false){
        const isDark = document.documentElement.classList.contains('dark');
        if(btn) btn.textContent = isDark ? 'מצב בהיר' : 'מצב כהה';
        if(!labelOnly){
          try { localStorage.setItem('theme', isDark ? 'dark' : 'light'); } catch(e) {}
        }
      }
      if(btn){
        btn.addEventListener('click', () => {
          document.documentElement.classList.toggle('dark');
          apply();
        });
        apply(true);
      }
    })();
  </script>
  {% endblock %}
</body>
</html>
